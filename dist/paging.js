!function(a,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):a.Paging=e(a.jQuery)}(this,function($){var Paging=function(a){this.defaults={callback:null,totalPage:10,url:"",params:"",jsonTotalPageName:"",pageIndexName:"pageNo",pageStart:0,datatype:"json",jsonpName:"callback",jsonpCallbackName:"",paginationID:"pagination",isGoTop:!0},this.defaults=$.extend(this.defaults,a)};return Paging.prototype.sendAjax=function(a){var e=this,n=e.defaults,t=n.params,s=0===n.pageStart?a-1:a,i={type:"get",url:n.url,data:t+"&"+n.pageIndexName+"="+s,dataType:n.datatype||"json"};"jsonp"===n.datatype&&(i.jsonp=n.jsonpName,n.jsonpCallbackName&&(i.jsonpCallback=n.jsonpCallbackName)),$.ajax(i).done(function(n){e.buildHtml(n,a)})},Paging.prototype.buildHtml=function(data,pageNo){var T=this,defs=T.defaults;defs.jsonTotalPageName&&(defs.totalPage=eval(defs.jsonTotalPageName)),T.setPage($("#"+defs.paginationID),defs.totalPage,pageNo),"function"==typeof defs.callback&&defs.callback(data)},Paging.prototype.setPage=function(a,e,n){var t,s=[],i=this,o=parseInt(n,10),p=parseInt(e,10);if(!a)return!1;if(p>1){if(s[s.length]=1===o?'<span class="page_pre">上一页</span>':'<span class="page_pre"><a href="">上一页</a></span>',p<=10)for(t=1;t<=p;t+=1)i.setPageList(s,t,o);else if(o<=4){for(t=1;t<=5;t+=1)i.setPageList(s,t,o);s[s.length]='...<span><a href="">'+p+"</a></span>"}else if(o>=p-3)for(s[s.length]='<span><a href="">1</a></span>...',t=p-4;t<=p;t+=1)i.setPageList(s,t,o);else{for(s[s.length]='<span><a href="">1</a></span>...',t=o-2;t<=o+2;t+=1)i.setPageList(s,t,o);s[s.length]='...<span><a href="">'+p+"</a></span>"}s[s.length]=o===p?'<span class="page_next">下一页</span>':'<span class="page_next"><a href="">下一页</a></span>',a.html(s.join("")),a.show(),i.bindPageClick(a,o,p)}else a.hide()},Paging.prototype.setPageList=function(a,e,n){var t=a;t[t.length]=n===e?"<span>"+e+"</span>":'<span><a href="">'+e+"</a></span>"},Paging.prototype.bindPageClick=function(a,e,n){var t=this,s=a.find("span"),i=s.first(),o=s.last(),p=s.slice(1,s.length-1),l=e,r=a.find("a");i.on("click",function(){if(1===l)return!1;l-=1,t.sendAjax(l)}),p.on("click",function(){var a=$(this).find("a");if(!a.length)return!1;l=parseInt(a.text(),10),t.sendAjax(l)}),o.on("click",function(){if(l===n)return!1;l+=1,t.sendAjax(l)}),t.defaults.isGoTop&&$(document).scrollTop(0),r.on("click",function(a){if(a.preventDefault)a.preventDefault();else{if(!a.returnValue)return!1;a.returnValue=!1}})},Paging.prototype.init=function(){this.sendAjax(1)},Paging.prototype.updateParams=function(a){var e=this;e.defaults.params=a,e.sendAjax(1)},Paging});