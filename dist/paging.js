!function(a,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):a.Paging=e(a.jQuery)}(this,function($){var Paging=function(a){this.defaults={callback:null,totalPage:10,url:"",params:"",jsonTotalPage:"",pageIndexName:"pageNo",pageStart:0,datatype:"json",jsonpName:"callback",jsonpCallbackName:"",paginationID:"pagination",isGoTop:!0},this.defaults=$.extend(this.defaults,a)};return Paging.prototype.sendAjax=function(a){var e=this,t=e.defaults,n=t.params,s=0===t.pageStart?a-1:a,i={type:"get",url:t.url,data:n+"&"+t.pageIndexName+"="+s,dataType:t.datatype||"json"};"jsonp"===t.datatype&&(i.jsonp=t.jsonpName,t.jsonpCallbackName&&(i.jsonpCallback=t.jsonpCallbackName)),$.ajax(i).done(function(t){e.buildHtml(t,a)})},Paging.prototype.buildHtml=function(data,pageNo){var T=this,defs=T.defaults;"function"==typeof defs.jsonTotalPage?defs.totalPage=defs.jsonTotalPage(data):"string"==typeof defs.jsonTotalPage&&(defs.totalPage=eval("data."+defs.jsonTotalPage)),T.setPage($("#"+defs.paginationID),defs.totalPage,pageNo),"function"==typeof defs.callback&&defs.callback(data)},Paging.prototype.setPage=function(a,e,t){var n,s=[],i=this,o=parseInt(t,10),p=parseInt(e,10),l=$('<div class="fp_page_bar"></div>'),f=a.find(".fp_page_bar");if(!a)return!1;if(f.length||(a.append(l),f=l),p>1){if(s[s.length]=1===o?'<span class="page_pre">上一页</span>':'<span class="page_pre"><a href="">上一页</a></span>',p<=10)for(n=1;n<=p;n+=1)i.setPageList(s,n,o);else if(o<=4){for(n=1;n<=5;n+=1)i.setPageList(s,n,o);s[s.length]='...<span><a href="">'+p+"</a></span>"}else if(o>=p-3)for(s[s.length]='<span><a href="">1</a></span>...',n=p-4;n<=p;n+=1)i.setPageList(s,n,o);else{for(s[s.length]='<span><a href="">1</a></span>...',n=o-2;n<=o+2;n+=1)i.setPageList(s,n,o);s[s.length]='...<span><a href="">'+p+"</a></span>"}s[s.length]=o===p?'<span class="page_next">下一页</span>':'<span class="page_next"><a href="">下一页</a></span>',f.html(s.join("")),a.show(),i.bindPageClick(a,o,p)}else a.hide()},Paging.prototype.setPageList=function(a,e,t){var n=a;n[n.length]=t===e?"<span>"+e+"</span>":'<span><a href="">'+e+"</a></span>"},Paging.prototype.bindPageClick=function(a,e,t){var n=this,s=a.find("span"),i=s.first(),o=s.last(),p=s.slice(1,s.length-1),l=e,f=a.find("a");i.on("click",function(){if(1===l)return!1;l-=1,n.sendAjax(l)}),p.on("click",function(){var a=$(this).find("a");if(!a.length)return!1;l=parseInt(a.text(),10),n.sendAjax(l)}),o.on("click",function(){if(l===t)return!1;l+=1,n.sendAjax(l)}),n.defaults.isGoTop&&$(document).scrollTop(0),f.on("click",function(a){if(a.preventDefault)a.preventDefault();else{if(!a.returnValue)return!1;a.returnValue=!1}})},Paging.prototype.init=function(){this.sendAjax(1)},Paging.prototype.updateParams=function(a){var e=this;e.defaults.params=a,e.sendAjax(1)},Paging});